---
page_title: "tailscale_tailnet_membership Resource - terraform-provider-tailscale"
subcategory: ""
description: |-
  The tailnet_membership resource manages a user's membership in a tailnet. Creating the resource ensures the identity is in the tailnet (creates an invite if needed); destroying it cancels a pending invite or removes the user. Supports suspend/restore and optional downgrade on destroy.
---

# tailscale_tailnet_membership (Resource)

The tailnet_membership resource manages a user's membership in a tailnet. Creating the resource ensures the identity is in the tailnet (creates an invite if needed); destroying it cancels a pending invite or removes the user. Supports suspend/restore and optional downgrade on destroy.

Full membership management requires credentials with **UserInvites** and **users** OAuth scopes. Creating invites may require a user-owned API key; see [Tailscale API docs](https://tailscale.com/kb/1371/invite-users).

## Example Usage

```terraform
# Ensure a member (invite when needed)
resource "tailscale_tailnet_membership" "alice" {
  login_name = "alice@example.com"
  role       = "member"
}

# Admin role
resource "tailscale_tailnet_membership" "bob_admin" {
  login_name = "bob@example.com"
  role       = "admin"
}

# Disable (suspend) and re-enable via suspended
resource "tailscale_tailnet_membership" "alice" {
  login_name = "alice@example.com"
  role       = "member"
  suspended  = true
}

# Optional: downgrade instead of remove on destroy
resource "tailscale_tailnet_membership" "alice" {
  login_name             = "alice@example.com"
  role                   = "admin"
  downgrade_on_destroy   = true
}
```

## List and inspect memberships

Use the `tailscale_users` data source to list all users. A single membership's state and role are available on the resource after apply.

```terraform
data "tailscale_users" "all" {}

output "alice_state" {
  value = tailscale_tailnet_membership.alice.state
}
```

`state` is one of `pending`, `active`, or `disabled`.

## Import

Import an existing membership by tailnet and login name (email):

```shell
terraform import 'tailscale_tailnet_membership.alice' 'example.com:alice@example.com'
```

Import ID format: `tailnet:login_name` (e.g. `example.com:alice@example.com`).

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `login_name` (String) The identity (email) for the membership. Used to match an invite or user in the tailnet.

### Optional

- `downgrade_on_destroy` (Boolean) If true, on destroy the user is downgraded to member or suspended instead of removed. Defaults to `false`.
- `role` (String) The role to assign. Use `member` or `admin`. Defaults to `member`.
- `suspended` (Boolean) When true, the membership is disabled (user suspended). When false, the user is active. Defaults to `false`.

### Read-Only

- `id` (String) The ID of this resource (tailnet:login_name).
- `invite_id` (String) The Tailscale user invite ID when state is pending.
- `state` (String) Current state: `pending` (invite not yet accepted), `active`, or `disabled` (suspended).
- `user_id` (String) The Tailscale user ID when state is active or disabled.
